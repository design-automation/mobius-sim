import { EEntType, EEntTypeStr } from './common';
// global variables to store ID mappings
const ID_MAP = new Map();
const ID_REV_MAP = new Map();
ID_REV_MAP.set(EEntType.POSI, new Map());
ID_REV_MAP.set(EEntType.VERT, new Map());
ID_REV_MAP.set(EEntType.EDGE, new Map());
ID_REV_MAP.set(EEntType.WIRE, new Map());
ID_REV_MAP.set(EEntType.POINT, new Map());
ID_REV_MAP.set(EEntType.PLINE, new Map());
ID_REV_MAP.set(EEntType.PGON, new Map());
ID_REV_MAP.set(EEntType.COLL, new Map());
// ============================================================================
export function idMake(ent_type, ent_i) {
    const id = ID_REV_MAP.get(ent_type).get(ent_i);
    if (id !== undefined) {
        return id;
    }
    const new_id = EEntTypeStr[ent_type] + ent_i;
    ID_MAP.set(new_id, [ent_type, ent_i]);
    ID_REV_MAP.get(ent_type).set(ent_i, new_id);
    return new_id;
}
export function idsMake(ents) {
    if (!Array.isArray(ents[0])) {
        if (ents.length === 0) {
            return [];
        } //  deal with empty array
        return idMake(ents[0], ents[1]);
    }
    else {
        ents = ents;
        return ents.map(ent_type_idxs_arr => idsMake(ent_type_idxs_arr));
    }
}
export function idsMakeFromIdxs(ent_type, idxs) {
    if (!Array.isArray(idxs)) {
        return idMake(ent_type, idxs);
    }
    else {
        idxs = idxs;
        if (idxs.length === 0) {
            return [];
        } //  deal with empty array
        return idxs.map(idx => idsMakeFromIdxs(ent_type, idx));
    }
}
// ============================================================================
export function idBreak(id) {
    const ent = ID_MAP.get(id);
    if (ent === undefined) {
        throw new Error('The entity ID "' + id + '" is not a valid entity ID.');
    }
    return ent;
}
export function idsBreak(id) {
    if (id === null) {
        return null;
    }
    if (!Array.isArray(id)) {
        return idBreak(id);
    }
    else {
        return id.map(a_id => idsBreak(a_id));
    }
}
// ============================================================================
export function getEntIdxs(ents_arr) {
    return ents_arr.map(ents => ents[1]);
}
// ============================================================================
// more general test
export function isTopo(ent_type) {
    if (ent_type === EEntType.VERT) {
        return true;
    }
    if (ent_type === EEntType.EDGE) {
        return true;
    }
    if (ent_type === EEntType.WIRE) {
        return true;
    }
    return false;
}
export function isObj(ent_type) {
    if (ent_type === EEntType.PGON) {
        return true;
    }
    if (ent_type === EEntType.PLINE) {
        return true;
    }
    if (ent_type === EEntType.POINT) {
        return true;
    }
    return false;
}
export function isDim0(ent_type) {
    if (ent_type === EEntType.POSI) {
        return true;
    }
    if (ent_type === EEntType.VERT) {
        return true;
    }
    if (ent_type === EEntType.POINT) {
        return true;
    }
    return false;
}
export function isDim1(ent_type) {
    if (ent_type === EEntType.EDGE) {
        return true;
    }
    if (ent_type === EEntType.PLINE) {
        return true;
    }
    return false;
}
export function isDim2(ent_type) {
    if (ent_type === EEntType.PGON) {
        return true;
    }
    return false;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbW9uX2lkX2Z1bmNzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vbGlicy9nZW8taW5mby9jb21tb25faWRfZnVuY3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFPLFFBQVEsRUFBRSxXQUFXLEVBQWUsTUFBTSxVQUFVLENBQUM7QUFFbkUsd0NBQXdDO0FBQ3hDLE1BQU0sTUFBTSxHQUFrQyxJQUFJLEdBQUcsRUFBRSxDQUFDO0FBQ3hELE1BQU0sVUFBVSxHQUFxQyxJQUFJLEdBQUcsRUFBRSxDQUFDO0FBQy9ELFVBQVUsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxJQUFJLEdBQUcsRUFBRSxDQUFFLENBQUM7QUFDMUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLElBQUksR0FBRyxFQUFFLENBQUUsQ0FBQztBQUMxQyxVQUFVLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxHQUFHLEVBQUUsQ0FBRSxDQUFDO0FBQzFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxJQUFJLEdBQUcsRUFBRSxDQUFFLENBQUM7QUFDMUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLElBQUksR0FBRyxFQUFFLENBQUUsQ0FBQztBQUMzQyxVQUFVLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsSUFBSSxHQUFHLEVBQUUsQ0FBRSxDQUFDO0FBQzNDLFVBQVUsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxJQUFJLEdBQUcsRUFBRSxDQUFFLENBQUM7QUFDMUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLElBQUksR0FBRyxFQUFFLENBQUUsQ0FBQztBQUUxQywrRUFBK0U7QUFDL0UsTUFBTSxVQUFVLE1BQU0sQ0FBQyxRQUFrQixFQUFF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b0I7QUFDcEIsTUFBTSxVQUFVLE1BQU0sQ0FBQyxRQUFrQjtJQUNyQyxJQUFJLFFBQVEsS0FBSyxRQUFRLENBQUMsSUFBSSxFQUFFO1FBQUUsT0FBTyxJQUFJLENBQUM7S0FBRTtJQUNoRCxJQUFJLFFBQVEsS0FBSyxRQUFRLENBQUMsSUFBSSxFQUFFO1FBQUUsT0FBTyxJQUFJLENBQUM7S0FBRTtJQUNoRCxJQUFJLFFBQVEsS0FBSyxRQUFRLENBQUMsSUFBSSxFQUFFO1FBQUUsT0FBTyxJQUFJLENBQUM7S0FBRTtJQUNoRCxPQUFPLEtBQUssQ0FBQztBQUNqQixDQUFDO0FBQ0QsTUFBTSxVQUFVLEtBQUssQ0FBQyxRQUFrQjtJQUNwQyxJQUFJLFFBQVEsS0FBSyxRQUFRLENBQUMsSUFBSSxFQUFFO1FBQUUsT0FBTyxJQUFJLENBQUM7S0FBRTtJQUNoRCxJQUFJLFFBQVEsS0FBSyxRQUFRLENBQUMsS0FBSyxFQUFFO1FBQUUsT0FBTyxJQUFJLENBQUM7S0FBRTtJQUNqRCxJQUFJLFFBQVEsS0FBSyxRQUFRLENBQUMsS0FBSyxFQUFFO1FBQUUsT0FBTyxJQUFJLENBQUM7S0FBRTtJQUNqRCxPQUFPLEtBQUssQ0FBQztBQUNqQixDQUFDO0FBQ0QsTUFBTSxVQUFVLE1BQU0sQ0FBQyxRQUFrQjtJQUNyQyxJQUFJLFFBQVEsS0FBSyxRQUFRLENBQUMsSUFBSSxFQUFFO1FBQUUsT0FBTyxJQUFJLENBQUM7S0FBRTtJQUNoRCxJQUFJLFFBQVEsS0FBSyxRQUFRLENBQUMsSUFBSSxFQUFFO1FBQUUsT0FBTyxJQUFJLENBQUM7S0FBRTtJQUNoRCxJQUFJLFFBQVEsS0FBSyxRQUFRLENBQUMsS0FBSyxFQUFFO1FBQUUsT0FBTyxJQUFJLENBQUM7S0FBRTtJQUNqRCxPQUFPLEtBQUssQ0FBQztBQUNqQixDQUFDO0FBQ0QsTUFBTSxVQUFVLE1BQU0sQ0FBQyxRQUFrQjtJQUNyQyxJQUFJLFFBQVEsS0FBSyxRQUFRLENBQUMsSUFBSSxFQUFFO1FBQUUsT0FBTyxJQUFJLENBQUM7S0FBRTtJQUNoRCxJQUFJLFFBQVEsS0FBSyxRQUFRLENBQUMsS0FBSyxFQUFFO1FBQUUsT0FBTyxJQUFJLENBQUM7S0FBRTtJQUNqRCxPQUFPLEtBQUssQ0FBQztBQUNqQixDQUFDO0FBQ0QsTUFBTSxVQUFVLE1BQU0sQ0FBQyxRQUFrQjtJQUNyQyxJQUFJLFFBQVEsS0FBSyxRQUFRLENBQUMsSUFBSSxFQUFFO1FBQUUsT0FBTyxJQUFJLENBQUM7S0FBRTtJQUNoRCxPQUFPLEtBQUssQ0FBQztBQUNqQixDQUFDIn0=